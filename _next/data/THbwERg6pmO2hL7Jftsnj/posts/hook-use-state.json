{"pageProps":{"source":{"compiledSource":"var l=Object.defineProperty,m=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;var p=(t,e,n)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&p(t,n,e[n]);if(c)for(var n of c(e))u.call(e,n)&&p(t,n,e[n]);return t},s=(t,e)=>m(t,d(e));var C=typeof require!=\"undefined\"?require:t=>{throw new Error('Dynamic require of \"'+t+'\" is not supported')};var i=(t,e)=>{var n={};for(var a in t)r.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&c)for(var a of c(t))e.indexOf(a)<0&&u.call(t,a)&&(n[a]=t[a]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var a=n,{components:t}=a,e=i(a,[\"components\"]);return mdx(MDXLayout,s(o(o({},layoutProps),e),{components:t,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"\\u524D\\u8A00\"),mdx(\"p\",null,\"useState \\u7684\\u57FA\\u672C\\u7528\\u6CD5\"),mdx(\"pre\",null,mdx(\"code\",o({parentName:\"pre\"},{className:\"language-javascript\"}),`const [state, setState] = useState(init);\n`)),mdx(\"p\",null,\"\\u4F8B\\u5B50\"),mdx(\"pre\",null,mdx(\"code\",o({parentName:\"pre\"},{className:\"language-javascript\"}),`function Counter() {\n  const [count, setCount] = React.useState(() => 0);\n  const increment = () => setCount(previousCount => previousCount + 1);\n  return <button onClick={increment}>{count}</button>;\n}\n`)),mdx(\"h2\",null,\"\\u60F0\\u6027\\u521D\\u59CB\\u5316\\u51FD\\u6570\"),mdx(\"p\",null,\"\\u4E00\\u822C\\u5BEB\\u6CD5\"),mdx(\"pre\",null,mdx(\"code\",o({parentName:\"pre\"},{className:\"language-javascript\"}),`const initialState = Number(window.localStorage.getItem('count'));\nconst [count, setCount] = React.useState(initialState);\n`)),mdx(\"p\",null,`\\u7576\\u51FD\\u6578\\u7D44\\u4EF6\\u66F4\\u65B0 re-render \\u6642\\uFF0C\\u51FD\\u6578\\u7D44\\u4EF6\\u5167\\u6240\\u6709\\u4EE3\\u78BC\\u90FD\\u6703\\u91CD\\u65B0\\u57F7\\u884C\\u4E00\\u904D\\u3002\\u6B64\\u6642\ninitialState \\u7684\\u521D\\u59CB\\u503C\\u662F\\u4E00\\u500B\\u76F8\\u5C0D\\u958B\\u92B7\\u8F03\\u5927\\u7684 IO \\u64CD\\u4F5C\\u3002\\u6BCF\\u6B21\\u51FD\\u6578\\u7D44\\u4EF6 re-render \\u6642\\uFF0C\\u7B2C\n\\u4E00\\u884C\\u4EE3\\u78BC\\u90FD\\u6703\\u88AB\\u57F7\\u884C\\u4E00\\u6B21\\uFF0C\\u5F15\\u8D77\\u4E0D\\u5FC5\\u8981\\u7684\\u6027\\u80FD\\u640D\\u8017\\u3002`),mdx(\"p\",null,\"\\u60F0\\u6027\\u521D\\u59CB\"),mdx(\"pre\",null,mdx(\"code\",o({parentName:\"pre\"},{className:\"language-javascript\"}),`const initialState = () => Number(window.localStorage.getItem('count'));\nconst [count, setCount] = React.useState(initialState);\n`)),mdx(\"p\",null,`\\u7576 initialState \\u4EE5\\u51FD\\u6578\\u5F62\\u5F0F\\u50B3\\u5165\\u6642\\uFF0C\\u5B83\\u53EA\\u6703\\u5728\\u51FD\\u6578\\u7D44\\u4EF6\\u521D\\u59CB\\u5316\\u7684\\u6642\\u5019\\u57F7\\u884C\\u4E00\\u6B21\\uFF0C\\u51FD\\u6578\nre-render \\u6642\\u4E0D\\u6703\\u518D\\u88AB\\u57F7\\u884C\\u3002\\u9019\\u500B\\u51FD\\u6578\\u5373\\u60F0\\u6027\\u521D\\u59CB\\u5316\\u51FD\\u6578\\u9019\\u500B\\u7279\\u6027\\uFF0C\\u53EF\\u4EE5\\u5728\\u9019\\u7A2E\\u5834\\u666F\\u4E0B\\u898F\\u907F\n\\u4E0D\\u5FC5\\u8981\\u7684\\u6027\\u80FD\\u554F\\u984C\\u3002`),mdx(\"h2\",null,\"\\u66F4\\u65B0\\u51FD\\u6570\"),mdx(\"p\",null,\"\\u4F8B\\u5B50\"),mdx(\"pre\",null,mdx(\"code\",o({parentName:\"pre\"},{className:\"language-javascript\"}),`function DelayedCounter() {\n  const [count, setCount] = React.useState(0);\n  const increment = async () => {\n    await doSomethingAsync();\n    setCount(count + 1);\n  };\n  return <button onClick={increment}>{count}</button>;\n}\n`)),mdx(\"p\",null,\"\\u4E0A\\u9762\\u7684\\u65B9\\u6CD5\\u5047\\u8A2D\\u9023\\u7E8C\\u9EDE\\u64CA\\u4E09\\u6B21\\uFF0Cconunt \\u7684\\u503C\\u4E00\\u76F4\\u90FD\\u662F 1\\uFF0C\\u800C\\u4E0D\\u662F\\u9810\\u671F\\u7684\\u6578\\u503C 3\\u3002\"),mdx(\"p\",null,\"\\u4F8B\\u5B50 2\"),mdx(\"pre\",null,mdx(\"code\",o({parentName:\"pre\"},{className:\"language-javascript\"}),`function DelayedCounter() {\n  const [count, setCount] = React.useState(0);\n  const increment = async () => {\n    await doSomethingAsync();\n    setCount(previousCount => previousCount + 1);\n  };\n  return <button onClick={increment}>{count}</button>;\n}\n`)),mdx(\"p\",null,`\\u53EF\\u4EE5\\u6539\\u7528\\u4F8B\\u5B50 2 \\u7684\\u5BEB\\u6CD5\\uFF0C\\u7528\\u50B3\\u51FD\\u5F0F\\u7684\\u65B9\\u6CD5\\uFF0CsetCount \\u6703\\u96B1\\u5F0F\\u50B3\\u5165\\u524D\\u4E00\\u6B21\\u7684\\u6578\\u503C\\uFF0C\\u6240\\u4EE5\\u6BCF\\u6B21\n\\u9EDE\\u64CA\\u90FD\\u6703\\u5E36\\u5165\\u66F4\\u65B0\\u5F8C\\u7684\\u6578\\u503C\\u3002`),mdx(\"h2\",null,\"\\u7D50\\u8AD6\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"\\u60F0\\u6027\\u521D\\u59CB\\u5316\\u51FD\\u6578\\u5728\\u67D0\\u4E9B\\u5834\\u666F\\u4E0B\\u53EF\\u4EE5\\u898F\\u907F\\u984D\\u5916\\u7684\\u8A08\\u7B97\\u958B\\u92B7\\uFF0C\\u63D0\\u5347\\u6027\\u80FD\")))}MDXContent.isMDXComponent=!0;\n","scope":{"title":"useState惰性初始化函數和更新函數","description":"useState惰性初始化函數和更新函數","tags":["HOOK"],"publishedDate":"2021-10-25"}},"frontMatter":{"title":"useState惰性初始化函數和更新函數","description":"useState惰性初始化函數和更新函數","tags":["HOOK"],"publishedDate":"2021-10-25"}},"__N_SSG":true}